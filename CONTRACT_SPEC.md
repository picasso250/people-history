### **《众语史书》铭刻合约技术规范 V0.1**

**文档状态**: `定稿`
**合约源码**: `contracts/PeoplesHistory.sol`
**目标网络**: Arbitrum One

---

#### **1. 合约目标**

本智能合约是《众语史书》协议的核心。其唯一且明确的目标是：作为一个去中心化的、无需许可的、永久存续的公共设施，接收用户提交的文本数据，并将其作为日志事件 (`Event`)，不可篡改地记录在区块链上。

#### **2. 核心原则：无依赖生存模型**

合约的设计严格遵循“无依赖生存模型”。部署后，合约所有者将调用 `renounceOwnership()` 函数，永久放弃所有权。此后，合约将成为一个无人可控的自主实体，其生命周期与目标网络的生命周期绑定。

#### **3. 合约接口 (ABI)**

**3.1. 核心事件 (Event)**

这是本合约记录数据的唯一方式，也是成本最低的链上永久存储方案。

*   **事件定义**: `Record(address indexed author, uint256 indexed timestamp, string content)`
    *   `author`: `address` (indexed) - 铭刻者的钱包地址。进行索引，以便能够快速按地址查询其所有历史记录。
    *   `timestamp`: `uint256` (indexed) - 铭刻发生时的区块时间戳。进行索引，以便能够按时间进行排序和检索。
    *   `content`: `string` - 用户铭刻的文本内容。此部分不进行索引，以降低Gas成本。

**3.2. 核心函数 (Function)**

*   **函数定义**: `inscribe(string memory _content)`
    *   **可见性**: `public`
    *   **功能**: 任何人都可以调用此函数。它接收一个字符串参数 `_content`，并触发一个 `Record` 事件，将调用者地址 (`msg.sender`)、当前区块时间戳 (`block.timestamp`) 和传入的 `_content` 记录到链上日志中。
    *   **权限**: 无任何权限控制。

**3.3. 管理函数 (Admin Function)**

*   **函数定义**: `renounceOwnership()`
    *   **可见性**: `public`
    *   **功能**: 只能由当前合约的 `owner` 调用。调用后，合约的 `owner` 将被设置为零地址 (`0x0...0`)。这是一个不可逆的操作。
    *   **核心使命**: 此函数是实现协议“去信任”承诺的关键。它将在合约部署后被**立即调用一次**，之后合约将再无管理员。

#### **4. 数据结构与处理**

*   **输入数据**: 合约直接处理标准的 `string` 类型数据。对内容本身不做任何限制或解释。
*   **链上存储**: 所有数据均存储在 `Event Log` 中，不占用合约的 `Storage` 空间，以实现最低的Gas成本。

#### **5. 安全性考量**

*   **极简性**: 合约代码极简，只包含一个核心写入函数和一个一次性的管理函数，最大程度地减少了攻击面。
*   **无管理权限**: 一旦所有权被放弃，合约将免疫任何来自开发者或项目方的单点故障或恶意操作风险。
*   **依赖库**: 继承自 OpenZeppelin 的 `Ownable.sol`，这是一个经过广泛审计和社区验证的成熟合约，确保了所有权管理逻辑的安全性。
